name: Notify Discord

on: [push]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Enviar notificaÃ§Ã£o para o Discord
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
          WORKFLOW_STATUS: ${{ job.status }}
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d '{
            "username": "GitHub Actions",
            "avatar_url": "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",
            "embeds": [{
              "title": "ðŸ”” AtualizaÃ§Ã£o no RepositÃ³rio!",
              "description": "Um novo evento ocorreu no repositÃ³rio.",
              "color": 3066993,
              "fields": [
                {
                  "name": "ðŸ‘¤ Autor",
                  "value": "**${{ github.actor }}**"
                },
                {
                  "name": "ðŸ“Œ Evento",
                  "value": "${{ github.event_name }}"
                },
                {
                  "name": "ðŸ“‚ RepositÃ³rio",
                  "value": "[${{ github.repository }}](https://github.com/${{ github.repository }})"
                },
                {
                  "name": "ðŸ“„ Ãšltimo Commit",
                  "value": "[Clique aqui](https://github.com/${{ github.repository }}/commit/${{ github.sha }})"
                },
                {
                  "name": "ðŸš¦ Status do Workflow",
                  "value": "'"$WORKFLOW_STATUS"'"
                }
              ]
            }]
          }' \
          "$DISCORD_WEBHOOK"
